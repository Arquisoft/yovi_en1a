ifndef::imagesdir[:imagesdir: ../images]

[[section-building-block-view]]
== Building Block View

The Building Block View provides a static decomposition of the YOVI_0 system. It follows a hierarchical approach, starting from the overall system and zooming into individual components.

=== 5.1. Level 1: White Box Overall System

The following diagram shows the top-level decomposition of the YOVI_0 system into its three primary subsystems: the Frontend (Webapp), the User Management (User Service), and the Logic Engine (GameY).

[plantuml, level1-whitebox, png]
----
@startuml
skinparam componentStyle uml2

package "YOVI_0 System" {
    component [Webapp] as webapp <<React>>
    component [User Service] as usersvc <<Node.js>>
    component [GameY Engine] as gamey <<Rust>>
}

webapp --> usersvc : "JSON/HTTP (Stats)"
webapp --> gamey : "JSON/YEN (Moves)"
@enduml
----

[cols="1,3", options="header"]
|===
|Name |Responsibility
|**Webapp** |The central orchestrator. It handles the hexagonal grid rendering, user interaction, and provides the documented API for external bots to participate in matches.
|**User Service** |A specialized service for administrative tasks. It simulates user persistence and provides the data necessary for the "Participation History" and "Statistics" requirements.
|**GameY Engine** |The high-performance "brain" of the system. Written in Rust for computational efficiency, it implements the formal rules of Game Y and suggests moves based on different difficulty levels.
|===

=== 5.2. Level 2: White Box GameY (Logic Subsystem)

This level zooms into the **GameY** component, as it contains the most complex logic regarding YEN notation and game strategies.

[plantuml, gamey-whitebox, png]
----
@startuml
package "GameY Engine (Rust)" {
    [Web Interface] as web
    [Core Logic] as core
    [Bot Registry] as bot
    [Notation Handler] as notation
}

web --> core : "requests evaluation"
core --> notation : "parses/generates YEN"
core --> bot : "invokes AI strategy"
@enduml
----

[cols="1,3", options="header"]
|===
|Component |Description
|**Core Logic** |The heart of the engine. It defines the board state and the connectivity logic (checking if a player has connected three edges).
|**Bot Registry** |A modular registry for AI strategies. It satisfies the requirement for "more than one strategy" (e.g., Random vs. Advanced).
|**Notation Handler** |Translates internal data structures into the **YEN Notation** format required for JSON communication.
|**Web Interface** |The entry point for the service, exposing endpoints like `/next-move` to the Webapp.
|===

=== 5.3. Level 2: White Box Webapp (Frontend Subsystem)

The Webapp manages the user's view and the external API for bots.

[cols="1,3", options="header"]
|===
|Component |Description
|**Game Controller** |Manages the local game loop, turn-taking, and coordinate conversion (UI pixels to Barycentric/Index).
|**Public Bot API Controller** |Specifically designed to meet the requirement of allowing bots to play. It accepts YEN positions and returns the engine's response.
|**Statistics View** |Interfaces with the User Service to display the player's win/loss history.
|===